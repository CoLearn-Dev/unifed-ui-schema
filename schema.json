{
  "type": "object",
  "properties": {
    "framework": {
      "type": "string",
      "widget": "Select",
      "default": "flower",
      "enum": [
        "flower",
        "fedtree",
        "fate"
      ]
    },
    "algorithm": {},
    "dataset": {},
    "model": {},
    "deployment": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "widget": "Select",
          "default": "local",
          "enum": [
            "local",
            "colink"
          ]
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "mode": {
                "const": "colink"
              }
            }
          },
          "then": {
            "properties": {
              "participants": {
                "type": "array",
                "widget": "SimpleList",
                "deleteOnEmpty": true,
                "view": {
                  "sizeXs": 12,
                  "sizeMd": 12,
                  "btnSize": "small"
                },
                "minItems": 1,
                "items": {
                  "type": "string",
                  "tt": "ol",
                  "minLength": 66,
                  "maxLength": 66,
                  "view": {
                    "dense": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "training": {}
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "framework": {
            "const": "flower"
          }
        }
      },
      "then": {
        "properties": {
          "algorithm": {
            "type": "string",
            "widget": "Select",
            "default": "fedavg",
            "enum": [
              "fedavg"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "framework": {
            "const": "fedtree"
          }
        }
      },
      "then": {
        "properties": {
          "algorithm": {
            "type": "string",
            "widget": "Select",
            "default": "secureboost",
            "enum": [
              "secureboost",
              "histsecagg"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "framework": {
            "const": "fate"
          }
        }
      },
      "then": {
        "properties": {
          "algorithm": {
            "type": "string",
            "widget": "Select",
            "default": "fedavg",
            "enum": [
              "fedavg",
              "homonn",
              "heteronn",
              "secureboost",
              "histsecagg",
              "heterolr",
              "homolr"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "algorithm": {
            "pattern": "fedavg|homonn|heteronn"
          }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "widget": "Select",
            "default": "mlp_128",
            "enum": [
              "logistic_regression",
              "mlp_128",
              "mlp_128_128"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "algorithm": {
            "pattern": "secureboost|histsecagg"
          }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "widget": "Select",
            "default": "gbdt_64_64_6",
            "enum": [
              "gbdt_64_64_6"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "algorithm": {
            "pattern": "fedavg|homonn|histsecagg"
          }
        }
      },
      "then": {
        "properties": {
          "dataset": {
            "type": "string",
            "widget": "Select",
            "default": "breast_horizontal",
            "enum": [
              "breast_horizontal",
              "default_credit_horizontal",
              "give_credit_horizontal",
              "student_horizontal",
              "vehicle_scale_horizontal",
              "celeba",
              "femnist",
              "reddit"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "algorithm": {
            "pattern": "heteronn|secureboost"
          }
        }
      },
      "then": {
        "properties": {
          "dataset": {
            "type": "string",
            "widget": "Select",
            "default": "breast_horizontal",
            "enum": [
              "breast_vertical",
              "default_credit_vertical",
              "dvisits_vertical",
              "give_credit_vertical",
              "motor_vertical",
              "student_vertical",
              "vehicle_scale_vertical"
            ]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "algorithm": {
            "pattern": "fedavg|homonn|heteronn"
          }
        }
      },
      "then": {
        "properties": {
          "training": {
            "type": "object",
            "properties": {
              "epochs": {
                "type": "number",
                "default": 30
              },
              "batch_size": {
                "type": "number",
                "default": 32
              },
              "learning_rate": {
                "type": "number",
                "default": 0.01
              },
              "client_per_round": {
                "type": "number",
                "default": 2
              },
              "optimizer": {
                "type": "string",
                "widget": "Select",
                "default": "sgd",
                "enum": [
                  "sgd",
                  "adam"
                ]
              }
            },
            "allOf": [
              {
                "if": {
                  "properties": {
                    "optimizer": {
                      "const": "sgd"
                    }
                  }
                },
                "then": {
                  "properties": {
                    "momentum": {
                      "type": "number",
                      "default": 0.9
                    },
                    "dampening": {
                      "type": "number",
                      "default": 0
                    },
                    "weight_decay": {
                      "type": "number",
                      "default": 0
                    },
                    "nesterov": {
                      "type": "boolean",
                      "default": false
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  ]
}